<% 
def links(dataset)
{
    def html = '++++\n<div style="float:right">\n';
    html += "<a href=\"${dataset.githubUrl}\">Edit on GitHub</a><br/>\n";
    html += '</div>\n++++\n';
    return html;
}

datasets.each { key, dataset ->
%>
[[dataset-${key}]]
=== ${dataset.name} 

${links(dataset)}

[small]#*_ID:_* __${key}__# +
[small]#*_Version:_* __${dataset.version ?: 'unknown'}__# +
[small]#*_Media type:_* __${dataset.mediaType ?: 'unknown'}__# +
[small]#*_Language:_* __${dataset.language ?: 'unknown'}__# +
[small]#*_URL:_* __${dataset.url ?: 'unknown'}__# +
[small]#*_Attribution footnoteref:[attributionDisclaimer]:_* __${dataset.attribution ?: 'unknown'}__# +
[small]#*_License footnoteref:[licenseDisclaimer]:_* <%
  if (dataset.licenses) {
    dataset.licenses.eachWithIndex { license, i ->
      if (i > 0) print ", "
      if (license.url) {
         print "__link:${license.url}[${license.name}]__"
      } else {
         print "__${license.name}__<%"
      }
    }
  }
  else {
    %>__unknown__<%
  }
%>#

${dataset.description ?: ''}

.Artifacts for ${dataset.name}
|====
| Artifact | SHA1
<%
  dataset.artifacts.each { artifactKey, artifact ->
    if (artifact.text) {
      println "| ${artifact.name}"
      println "| __generated__"
    }
    else {
      println "| link:${artifact.url}[${artifact.name}]"
      println "| ${artifact.sha1}"
    }
  }
%>
|====
<%
}
%>
